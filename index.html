<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GalaxyBrowserV2 - by William</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>/* =============================== */
/* GLOBAL + BACKGROUND             */
/* =============================== */

body {
    margin: 0;
    padding: 0;
    background: black;
    font-family: Arial, sans-serif;
    color: white;
    overflow: hidden;
}

/* Starfield background */
body::before {
    content: "";
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: radial-gradient(circle at center, #111 0%, #000 70%);
    z-index: -2;
}

body::after {
    content: "";
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-image: url('https://i.imgur.com/9aKQX9T.png');
    opacity: 0.25;
    z-index: -1;
    pointer-events: none;
}

/* =============================== */
/* TOP BAR + COLLAPSIBLE           */
/* =============================== */

.top-bar {
    width: 100%;
    background: rgba(20, 20, 20, 0.9);
    border-bottom: 2px solid #0ff;
    padding: 10px;
    box-sizing: border-box;
    transition: transform 0.3s ease;
}

.top-bar.collapsed {
    transform: translateY(-100%);
}

.url-container {
    display: flex;
    gap: 8px;
    margin-bottom: 10px;
}

.url-container input {
    flex: 1;
    padding: 8px;
    border: 1px solid #0ff;
    background: black;
    color: #0ff;
}

.go-btn, .collapse-btn {
    padding: 8px 12px;
    background: #0ff;
    color: black;
    border: none;
    cursor: pointer;
    font-weight: bold;
}

/* =============================== */
/* TAB BAR                         */
/* =============================== */

.tab-bar {
    display: flex;
    gap: 10px;
}

.tab-btn {
    padding: 8px 14px;
    background: #111;
    border: 1px solid #0ff;
    color: #0ff;
    cursor: pointer;
}

.tab-btn.active {
    background: #0ff;
    color: black;
}

/* =============================== */
/* MAIN CONTENT AREA               */
/* =============================== */

.main-content {
    position: absolute;
    top: 90px;
    bottom: 0;
    width: 100%;
    overflow: hidden;
}

.tab-page {
    display: none;
    width: 100%;
    height: 100%;
    overflow-y: auto;
    padding: 20px;
    box-sizing: border-box;
}

.tab-page.active {
    display: block;
}

/* =============================== */
/* WEB TAB                         */
/* =============================== */

#browserFrame {
    width: 100%;
    height: 100%;
    border: none;
}

/* =============================== */
/* CHAT FULL PAGE                  */
/* =============================== */

.chat-full-container {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.chat-messages {
    flex: 1;
    overflow-y: auto;
    background: rgba(0, 255, 255, 0.05);
    border: 1px solid #0ff;
    padding: 10px;
}

.chat-input-area {
    display: flex;
    gap: 10px;
    margin-top: 10px;
}

.chat-input-area input {
    flex: 1;
    padding: 8px;
    background: black;
    border: 1px solid #0ff;
    color: #0ff;
}

.chat-input-area button {
    padding: 8px 14px;
    background: #0ff;
    color: black;
    border: none;
    cursor: pointer;
}

.chat-warning {
    margin-top: 10px;
    color: #f33;
    font-weight: bold;
    display: none;
}

/* =============================== */
/* SLIDE-OUT CHAT PANEL            */
/* =============================== */

.chat-panel {
    position: fixed;
    right: -350px;
    top: 0;
    width: 350px;
    height: 100%;
    background: rgba(10, 10, 10, 0.95);
    border-left: 2px solid #0ff;
    transition: right 0.3s ease;
    padding: 10px;
    box-sizing: border-box;
}

.chat-panel.open {
    right: 0;
}

/* =============================== */
/* CHAT TOGGLE BUTTON              */
/* =============================== */

.chat-toggle-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 14px 20px;
    background: #0ff;
    color: black;
    border: none;
    cursor: pointer;
    font-weight: bold;
    border-radius: 30px;
    transition: 0.3s;
}

/* Orb style */
.chat-toggle-btn.orb {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    padding: 0;
    font-size: 14px;
}

/* =============================== */
/* ACCOUNT SYSTEM PAGES            */
/* =============================== */

.account-page {
    display: none;
}

.account-page.active {
    display: block;
}

.account-page input,
.account-page select {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    background: black;
    border: 1px solid #0ff;
    color: #0ff;
}

.account-page button {
    width: 100%;
    padding: 10px;
    background: #0ff;
    color: black;
    border: none;
    cursor: pointer;
    margin-top: 10px;
}

.link {
    color: #0ff;
    cursor: pointer;
    text-decoration: underline;
    margin-top: 10px;
}

/* =============================== */
/* ADMIN PANEL                     */
/* =============================== */

.admin-page {
    display: none;
}

.admin-page.active {
    display: block;
}

.admin-messages {
    max-height: 250px;
    overflow-y: auto;
    border: 1px solid #0ff;
    padding: 10px;
    background: rgba(0,255,255,0.05);
}

.admin-messages .msg {
    border-bottom: 1px solid #0ff;
    padding: 6px 0;
}

.admin-messages button {
    margin-left: 10px;
    padding: 4px 8px;
    background: #f33;
    color: white;
    border: none;
    cursor: pointer;
}

.error {
    color: #f33;
    font-weight: bold;
}

/* =============================== */
/* SETTINGS PANEL                  */
/* =============================== */

.settings-panel {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 300px;
    padding: 20px;
    background: rgba(10,10,10,0.95);
    border: 2px solid #0ff;
    transform: translate(-50%, -50%);
    display: none;
}

.settings-panel select,
.settings-panel button {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
}

/* =============================== */
/* SCROLLBAR STYLE                 */
/* =============================== */

::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-thumb {
    background: #0ff;
}

::-webkit-scrollbar-track {
    background: #111;
}
    :root {
      --bg-main: #020515;
      --bg-panel: #050818;
      --bg-elevated: #070b1f;
      --accent: #5c8dff;
      --accent-strong: #9b5cff;
      --accent-soft: rgba(92, 141, 255, 0.25);
      --accent-soft-2: rgba(155, 92, 255, 0.25);
      --text-main: #f5f7ff;
      --text-muted: #9aa4c6;
      --danger: #ff4f6a;
      --border-subtle: #181f35;
      --shadow-soft: 0 22px 55px rgba(0, 0, 0, 0.8);
      --shadow-glow: 0 0 30px rgba(92, 141, 255, 0.7);
      --transition-fast: 0.18s ease-out;
      --transition-med: 0.28s ease;
      --transition-slow: 0.45s ease;
      --chat-width: 420px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #1a2450 0, #020515 45%, #000 100%);
      color: var(--text-main);
      display: flex;
      align-items: stretch;
      justify-content: stretch;
    }

    .nebula-bg {
      position: fixed;
      inset: -20%;
      background:
        radial-gradient(circle at 10% 0%, rgba(155, 92, 255, 0.25), transparent 55%),
        radial-gradient(circle at 90% 100%, rgba(92, 141, 255, 0.2), transparent 55%),
        radial-gradient(circle at 50% 50%, rgba(0, 255, 204, 0.08), transparent 60%);
      opacity: 0.9;
      pointer-events: none;
      filter: blur(2px);
      z-index: -3;
    }

    .starfield {
      position: fixed;
      inset: 0;
      background-image:
        radial-gradient(1px 1px at 10% 20%, rgba(255, 255, 255, 0.4), transparent),
        radial-gradient(1px 1px at 80% 30%, rgba(255, 255, 255, 0.35), transparent),
        radial-gradient(1px 1px at 50% 80%, rgba(255, 255, 255, 0.3), transparent),
        radial-gradient(1px 1px at 20% 70%, rgba(255, 255, 255, 0.25), transparent);
      opacity: 0.7;
      mix-blend-mode: screen;
      pointer-events: none;
      z-index: -2;
      transition: opacity var(--transition-med);
    }

    .starfield.off {
      opacity: 0;
    }

    .parallax-layer {
      position: fixed;
      inset: -10%;
      background:
        radial-gradient(circle at 20% 10%, rgba(92, 141, 255, 0.18), transparent 60%),
        radial-gradient(circle at 80% 90%, rgba(155, 92, 255, 0.16), transparent 60%);
      opacity: 0.6;
      mix-blend-mode: screen;
      pointer-events: none;
      z-index: -1;
      transition: opacity var(--transition-med);
    }

    .parallax-layer.off {
      opacity: 0;
    }

    .shell {
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(9, 13, 35, 0.98), rgba(5, 8, 25, 0.99));
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-soft);
    }

    .shell::before {
      content: "";
      position: absolute;
      inset: 0;
      background: conic-gradient(
        from 210deg,
        rgba(92, 141, 255, 0.2),
        transparent 18%,
        transparent 55%,
        rgba(155, 92, 255, 0.2),
        transparent 80%,
        rgba(92, 141, 255, 0.2)
      );
      opacity: 0.25;
      mix-blend-mode: soft-light;
      pointer-events: none;
    }

    .top-bar {
      position: relative;
      z-index: 3;
      height: 46px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 14px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.04);
      background: linear-gradient(
        to bottom,
        rgba(10, 14, 40, 0.96),
        rgba(5, 8, 25, 0.98)
      );
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7);
    }

    .window-dots {
      display: flex;
      gap: 7px;
    }

    .dot {
      width: 11px;
      height: 11px;
      border-radius: 999px;
      background: #ff5f57;
      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.4);
    }

    .dot:nth-child(2) {
      background: #febc2e;
    }

    .dot:nth-child(3) {
      background: #28c840;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-left: 10px;
    }

    .brand-logo {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #ffffff, #9b5cff 45%, #020515 100%);
      box-shadow: 0 0 18px rgba(155, 92, 255, 0.7);
      position: relative;
      overflow: hidden;
    }

    .brand-logo::after {
      content: "";
      position: absolute;
      inset: 35% -40%;
      background: linear-gradient(120deg, rgba(255, 255, 255, 0.7), transparent);
      transform: translateX(-120%);
      animation: logoSweep 4s ease-in-out infinite;
    }

    @keyframes logoSweep {
      0%, 60% { transform: translateX(-120%); }
      80% { transform: translateX(40%); }
      100% { transform: translateX(120%); }
    }

    .brand-text-main {
      font-size: 14px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .brand-text-sub {
      font-size: 11px;
      color: var(--accent-soft-2);
      text-transform: uppercase;
      letter-spacing: 0.18em;
    }

    .top-right-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .settings-btn {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.12), rgba(8, 12, 32, 0.95));
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: border-color var(--transition-fast), color var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
    }

    .settings-btn::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 30% 0%, rgba(92, 141, 255, 0.4), transparent 60%);
      opacity: 0;
      transition: opacity var(--transition-fast);
    }

    .settings-btn:hover {
      border-color: rgba(92, 141, 255, 0.7);
      color: var(--text-main);
      box-shadow: 0 0 0 1px rgba(92, 141, 255, 0.4), 0 10px 20px rgba(0, 0, 0, 0.7);
      transform: translateY(-1px);
    }

    .settings-btn:hover::after {
      opacity: 1;
    }

    .settings-btn:active {
      transform: translateY(0);
      box-shadow: none;
    }

    .settings-icon {
      font-size: 16px;
    }

    .main-row {
      flex: 1;
      display: flex;
      position: relative;
      overflow: hidden;
    }

    .browser {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 10px 14px 14px;
      gap: 8px;
      position: relative;
      z-index: 1;
      transition: transform var(--transition-slow);
    }

    .browser.shifted {
      transform: translateX(calc(-1 * var(--chat-width) / 4));
    }

    .tab-bar {
      display: flex;
      gap: 8px;
      margin-bottom: 4px;
    }

    .tab {
      flex: 0 0 auto;
      min-width: 120px;
      max-width: 220px;
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(8, 12, 32, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.04);
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--text-muted);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: background var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast);
    }

    .tab::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, rgba(92, 141, 255, 0.4), transparent 60%);
      opacity: 0;
      transition: opacity var(--transition-med);
      pointer-events: none;
    }

    .tab.active {
      background: linear-gradient(135deg, rgba(92, 141, 255, 0.22), rgba(9, 13, 35, 0.95));
      border-color: rgba(92, 141, 255, 0.7);
      color: var(--text-main);
      box-shadow: 0 0 0 1px rgba(92, 141, 255, 0.4), 0 12px 28px rgba(0, 0, 0, 0.7);
      transform: translateY(-1px);
    }

    .tab.active::before {
      opacity: 1;
    }

    .tab:hover:not(.active) {
      border-color: rgba(92, 141, 255, 0.4);
      color: var(--text-main);
      transform: translateY(-1px);
    }

    .tab-icon {
      width: 14px;
      height: 14px;
      border-radius: 4px;
      background: radial-gradient(circle at 30% 20%, #ffffff, #5c8dff 45%, #020515 100%);
      box-shadow: 0 0 10px rgba(92, 141, 255, 0.7);
      flex-shrink: 0;
    }

    .tab-title {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .nav-row {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nav-buttons {
      display: flex;
      gap: 6px;
    }

    .nav-btn {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.12), rgba(8, 12, 32, 0.95));
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      font-size: 14px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: border-color var(--transition-fast), color var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
    }

    .nav-btn::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 30% 0%, rgba(92, 141, 255, 0.4), transparent 60%);
      opacity: 0;
      transition: opacity var(--transition-fast);
    }

    .nav-btn:hover {
      border-color: rgba(92, 141, 255, 0.7);
      color: var(--text-main);
      box-shadow: 0 0 0 1px rgba(92, 141, 255, 0.4), 0 10px 20px rgba(0, 0, 0, 0.7);
      transform: translateY(-1px);
    }

    .nav-btn:hover::after {
      opacity: 1;
    }

    .nav-btn:active {
      transform: translateY(0);
      box-shadow: none;
    }

    .address-bar {
      flex: 1;
      position: relative;
    }

    .address-input {
      width: 100%;
      padding: 7px 34px 7px 34px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.08), rgba(8, 12, 32, 0.98));
      color: var(--text-main);
      font-size: 13px;
      outline: none;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7);
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast), transform var(--transition-fast);
    }

    .address-input::placeholder {
      color: rgba(154, 164, 198, 0.7);
    }

    .address-bar::before {
      content: "https://";
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 11px;
      color: rgba(154, 164, 198, 0.7);
      pointer-events: none;
    }

    .address-bar:focus-within .address-input {
      border-color: rgba(92, 141, 255, 0.9);
      box-shadow: var(--shadow-glow);
      transform: translateY(-1px);
    }

    .search-icon {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 14px;
      color: rgba(154, 164, 198, 0.9);
      pointer-events: none;
    }

    .search-hint {
      font-size: 11px;
      color: var(--text-muted);
      margin-left: 4px;
      opacity: 0.8;
    }

    .search-hint span {
      color: var(--accent);
    }

    .content-wrapper {
      flex: 1;
      margin-top: 6px;
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.04);
      background: radial-gradient(circle at top, rgba(92, 141, 255, 0.12), rgba(5, 8, 25, 0.98));
      overflow: hidden;
      position: relative;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.8);
    }

    .content-iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: #050814;
      opacity: 1;
      transition: opacity var(--transition-med);
    }

    .content-iframe.fading {
      opacity: 0;
    }

    .content-overlay {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 10% 0%, rgba(155, 92, 255, 0.2), transparent 55%);
      pointer-events: none;
      opacity: 0;
      transition: opacity var(--transition-med);
    }

    .content-wrapper.loading .content-overlay {
      opacity: 1;
      animation: pulseOverlay 1.4s ease-in-out infinite;
    }

    @keyframes pulseOverlay {
      0%, 100% { opacity: 0.1; }
      50% { opacity: 0.35; }
    }

    .loading-orbit {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      opacity: 0;
      transition: opacity var(--transition-med);
    }

    .content-wrapper.loading .loading-orbit {
      opacity: 1;
    }

    .orbit-ring {
      width: 80px;
      height: 80px;
      border-radius: 999px;
      border: 1px solid rgba(92, 141, 255, 0.4);
      border-top-color: rgba(155, 92, 255, 0.9);
      border-right-color: rgba(92, 141, 255, 0.9);
      box-shadow: 0 0 20px rgba(92, 141, 255, 0.7);
      animation: orbitSpin 1.2s linear infinite;
      position: relative;
    }

    .orbit-core {
      position: absolute;
      inset: 22px;
      border-radius: inherit;
      background: radial-gradient(circle at 30% 20%, #ffffff, #5c8dff 45%, #020515 100%);
      box-shadow: 0 0 25px rgba(92, 141, 255, 0.9);
    }

    @keyframes orbitSpin {
      to { transform: rotate(360deg); }
    }

    .about-page {
      width: 100%;
      height: 100%;
      padding: 26px 26px 22px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      background: radial-gradient(circle at top left, rgba(155, 92, 255, 0.18), rgba(5, 8, 25, 0.98));
      color: var(--text-main);
    }

    .about-heading {
      font-size: 22px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--accent);
    }

    .about-subtitle {
      font-size: 13px;
      color: var(--text-muted);
      max-width: 520px;
    }

    .about-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 18px;
    }

    .about-card {
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: linear-gradient(145deg, rgba(8, 12, 32, 0.96), rgba(9, 13, 35, 0.98));
      padding: 16px 18px;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.7);
      position: relative;
      overflow: hidden;
    }

    .about-card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at 0 0, rgba(92, 141, 255, 0.3), transparent 55%);
      opacity: 0.4;
      mix-blend-mode: screen;
    }

    .about-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .about-owner {
      font-size: 16px;
      font-weight: 600;
    }

    .about-email {
      font-size: 13px;
      color: var(--accent);
      margin-top: 4px;
    }

    .about-chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 10px;
    }

    .chip {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(5, 8, 25, 0.9);
      color: var(--text-muted);
    }

    .chip.accent {
      border-color: rgba(92, 141, 255, 0.8);
      color: var(--accent);
      background: rgba(92, 141, 255, 0.12);
    }

    .copyright-text {
      font-size: 11px;
      color: var(--text-muted);
      line-height: 1.5;
      margin-top: 6px;
    }

    .copyright-strong {
      color: var(--accent-strong);
      font-weight: 600;
    }

    .footer-line {
      font-size: 10px;
      color: rgba(154, 164, 198, 0.7);
      margin-top: auto;
      text-transform: uppercase;
      letter-spacing: 0.18em;
    }

    .footer-line span {
      color: var(--accent);
    }

    /* CHAT BUTTON STYLES */

    .chat-toggle {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      z-index: 5;
      cursor: pointer;
      transition: transform var(--transition-fast), filter var(--transition-fast);
    }

    .chat-toggle:hover {
      transform: translateY(-50%) scale(1.05);
      filter: brightness(1.1);
    }

    .chat-toggle-pill,
    .chat-toggle-orb {
      display: none;
    }

    .chat-toggle-pill.active {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px 18px;
      border-radius: 999px;
      border: 1px solid rgba(92, 141, 255, 0.9);
      background: linear-gradient(135deg, rgba(92, 141, 255, 0.95), rgba(155, 92, 255, 0.95));
      color: #ffffff;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      box-shadow: 0 14px 30px rgba(92, 141, 255, 0.9);
    }

    .chat-toggle-orb.active {
      display: flex;
      width: 54px;
      height: 54px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #ffffff, #5c8dff 45%, #020515 100%);
      box-shadow:
        0 0 25px rgba(92, 141, 255, 0.9),
        0 0 60px rgba(155, 92, 255, 0.7);
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .chat-toggle-orb::after {
      content: "CHAT";
      position: absolute;
      bottom: 6px;
      font-size: 9px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.9);
    }

    .chat-toggle-orb-inner {
      width: 70%;
      height: 70%;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.9), rgba(155, 92, 255, 0.9));
      opacity: 0.9;
      animation: orbPulse 3s ease-in-out infinite;
    }

    @keyframes orbPulse {
      0%, 100% { transform: scale(1); opacity: 0.9; }
      50% { transform: scale(1.08); opacity: 1; }
    }

    /* CHAT PANEL */

    .chat-panel {
      position: absolute;
      top: 46px;
      right: 0;
      bottom: 0;
      width: var(--chat-width);
      background: radial-gradient(circle at top right, rgba(92, 141, 255, 0.18), rgba(5, 8, 25, 0.98));
      border-left: 1px solid var(--border-subtle);
      box-shadow: -18px 0 40px rgba(0, 0, 0, 0.9);
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform var(--transition-slow);
      z-index: 4;
    }

    .chat-panel.open {
      transform: translateX(0);
    }

    .chat-header {
      padding: 12px 16px 10px;
      border-bottom: 1px solid var(--border-subtle);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .chat-title-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .chat-title {
      font-size: 13px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .chat-subtitle {
      font-size: 11px;
      color: var(--accent-soft-2);
    }

    .chat-status-pill {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(92, 141, 255, 0.7);
      background: rgba(5, 8, 25, 0.9);
      color: var(--accent);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .status-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #2ecc71;
      box-shadow: 0 0 10px rgba(46, 204, 113, 0.9);
    }

    .chat-close-btn {
      margin-left: 8px;
      width: 26px;
      height: 26px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(8, 12, 32, 0.96);
      color: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      cursor: pointer;
      transition: border-color var(--transition-fast), color var(--transition-fast), background var(--transition-fast), transform var(--transition-fast);
    }

    .chat-close-btn:hover {
      border-color: rgba(92, 141, 255, 0.7);
      color: var(--text-main);
      transform: translateY(-1px);
    }

    .chat-body {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 10px 12px 12px;
      gap: 8px;
    }

    .chat-messages {
      flex: 1;
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: radial-gradient(circle at top, rgba(92, 141, 255, 0.12), rgba(5, 8, 25, 0.98));
      padding: 10px 10px 12px;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.7);
    }

    .chat-messages::-webkit-scrollbar {
      width: 6px;
    }

    .chat-messages::-webkit-scrollbar-track {
      background: transparent;
    }

    .chat-messages::-webkit-scrollbar-thumb {
      background: rgba(92, 141, 255, 0.6);
      border-radius: 999px;
    }

    .message {
      margin-bottom: 8px;
      display: flex;
      flex-direction: column;
      gap: 2px;
      animation: messageIn 0.25s ease-out;
    }

    @keyframes messageIn {
      from {
        opacity: 0;
        transform: translateY(4px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message-meta {
      font-size: 10px;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      gap: 6px;
    }

    .message-bubble {
      align-self: flex-start;
      max-width: 100%;
      padding: 7px 9px;
      border-radius: 11px;
      background: rgba(8, 12, 32, 0.96);
      border: 1px solid rgba(255, 255, 255, 0.06);
      font-size: 12px;
      line-height: 1.4;
      color: var(--text-main);
      position: relative;
      overflow: hidden;
    }

    .message-bubble::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 0 0, rgba(92, 141, 255, 0.25), transparent 60%);
      opacity: 0.4;
      mix-blend-mode: screen;
    }

    .message.self .message-bubble {
      align-self: flex-end;
      background: linear-gradient(135deg, rgba(92, 141, 255, 0.9), rgba(155, 92, 255, 0.9));
      border-color: rgba(255, 255, 255, 0.2);
      box-shadow: 0 0 18px rgba(92, 141, 255, 0.8);
    }

    .message.self .message-bubble::before {
      opacity: 0;
    }

    .message.self .message-meta {
      justify-content: flex-end;
    }

    .chat-empty {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: var(--text-muted);
      pointer-events: none;
    }

    .chat-form {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .chat-row {
      display: flex;
      gap: 6px;
    }

    .chat-input,
    .chat-name-input {
      flex: 1;
      padding: 7px 9px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: rgba(8, 12, 32, 0.96);
      color: var(--text-main);
      font-size: 12px;
      outline: none;
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast), transform var(--transition-fast);
    }

    .chat-input::placeholder,
    .chat-name-input::placeholder {
      color: rgba(154, 164, 198, 0.7);
    }

    .chat-input:focus,
    .chat-name-input:focus {
      border-color: rgba(92, 141, 255, 0.9);
      box-shadow: 0 0 0 1px rgba(92, 141, 255, 0.5);
      transform: translateY(-1px);
    }

    .chat-send-btn {
      padding: 7px 14px;
      border-radius: 999px;
      border: 1px solid rgba(92, 141, 255, 0.9);
      background: linear-gradient(135deg, rgba(92, 141, 255, 0.95), rgba(155, 92, 255, 0.95));
      color: #ffffff;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(92, 141, 255, 0.8);
      transition: transform var(--transition-fast), box-shadow var(--transition-fast), filter var(--transition-fast), background var(--transition-fast);
      white-space: nowrap;
    }

    .chat-send-btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 14px 30px rgba(92, 141, 255, 0.9);
    }

    .chat-send-btn:active {
      transform: translateY(0);
      box-shadow: 0 8px 18px rgba(92, 141, 255, 0.7);
    }

    .chat-footer {
      font-size: 10px;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      gap: 6px;
      margin-top: 2px;
    }

    .chat-footer span {
      color: var(--accent);
    }

    .chat-error {
      font-size: 11px;
      color: var(--danger);
      margin-top: 2px;
      min-height: 14px;
    }

    /* SETTINGS PANEL */

    .settings-panel {
      position: absolute;
      top: 46px;
      left: 0;
      bottom: 0;
      width: 320px;
      background: radial-gradient(circle at top left, rgba(92, 141, 255, 0.18), rgba(5, 8, 25, 0.98));
      border-right: 1px solid var(--border-subtle);
      box-shadow: 18px 0 40px rgba(0, 0, 0, 0.9);
      transform: translateX(-100%);
      transition: transform var(--transition-slow);
      z-index: 4;
      display: flex;
      flex-direction: column;
    }

    .settings-panel.open {
      transform: translateX(0);
    }

    .settings-header {
      padding: 12px 14px 10px;
      border-bottom: 1px solid var(--border-subtle);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .settings-title {
      font-size: 13px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .settings-subtitle {
      font-size: 11px;
      color: var(--accent-soft-2);
    }

    .settings-body {
      flex: 1;
      padding: 10px 14px 14px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .settings-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .settings-card {
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: linear-gradient(145deg, rgba(8, 12, 32, 0.96), rgba(9, 13, 35, 0.98));
      padding: 10px 11px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.7);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .settings-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .settings-label {
      font-size: 12px;
      color: var(--text-main);
    }

    .settings-description {
      font-size: 11px;
      color: var(--text-muted);
    }

    .toggle-group {
      display: flex;
      gap: 6px;
    }

    .toggle-pill {
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(5, 8, 25, 0.9);
      font-size: 11px;
      color: var(--text-muted);
      cursor: pointer;
      transition: border-color var(--transition-fast), background var(--transition-fast), color var(--transition-fast), transform var(--transition-fast);
    }

    .toggle-pill.active {
      border-color: rgba(92, 141, 255, 0.9);
      background: rgba(92, 141, 255, 0.18);
      color: var(--accent);
      transform: translateY(-1px);
    }

    .switch {
      position: relative;
      width: 38px;
      height: 20px;
      border-radius: 999px;
      background: rgba(8, 12, 32, 0.96);
      border: 1px solid rgba(255, 255, 255, 0.08);
      cursor: pointer;
      transition: border-color var(--transition-fast), background var(--transition-fast);
    }

    .switch-thumb {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 14px;
      height: 14px;
      border-radius: 999px;
      background: rgba(154, 164, 198, 0.9);
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.7);
      transition: transform var(--transition-fast), background var(--transition-fast), box-shadow var(--transition-fast);
    }

    .switch.on {
      border-color: rgba(92, 141, 255, 0.9);
      background: rgba(92, 141, 255, 0.18);
    }

    .switch.on .switch-thumb {
      transform: translateX(16px);
      background: #5c8dff;
      box-shadow: 0 0 12px rgba(92, 141, 255, 0.9);
    }

    .settings-footer {
      font-size: 10px;
      color: var(--text-muted);
      padding: 6px 14px 10px;
      border-top: 1px solid var(--border-subtle);
    }

    /* RESPONSIVE */

    @media (max-width: 900px) {
      .chat-panel {
        width: 100%;
      }
      :root {
        --chat-width: 100%;
      }
      .browser.shifted {
        transform: translateX(0);
      }
      .chat-toggle {
        right: 8px;
      }
    }

    @media (max-width: 640px) {
      .browser {
        padding-inline: 8px;
      }
      .content-wrapper {
        border-radius: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="nebula-bg"></div>
  <div class="starfield" id="starfield"></div>
  <div class="parallax-layer" id="parallaxLayer"></div>

  <div class="shell">
    <div class="top-bar">
      <div style="display:flex;align-items:center;gap:10px;">
        <div class="window-dots">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
        <div class="brand">
          <div class="brand-logo"></div>
          <div>
            <div class="brand-text-main">GalaxyBrowserV2</div>
            <div class="brand-text-sub">By William</div>
          </div>
        </div>
      </div>
      <div class="top-right-controls">
        <button class="settings-btn" id="settingsBtn" title="Settings">
          <span class="settings-icon">⚙</span>
        </button>
      </div>
    </div>

    <div class="main-row">
      <!-- SETTINGS PANEL -->
      <div class="settings-panel" id="settingsPanel">
        <div class="settings-header">
          <div class="settings-title">Settings</div>
          <div class="settings-subtitle">Tune GalaxyBrowserV2 to your style.</div>
        </div>
        <div class="settings-body">
          <div>
            <div class="settings-section-title">Chat Button Style</div>
            <div class="settings-card">
              <div class="settings-row">
                <div class="settings-label">Appearance</div>
              </div>
              <div class="settings-description">
                Choose how the chat toggle looks on the right edge.
              </div>
              <div class="toggle-group">
                <button class="toggle-pill" data-style="pill" id="stylePill">Neon Pill</button>
                <button class="toggle-pill" data-style="orb" id="styleOrb">Hologram Orb</button>
              </div>
            </div>
          </div>

          <div>
            <div class="settings-section-title">Visual Effects</div>
            <div class="settings-card">
              <div class="settings-row">
                <div>
                  <div class="settings-label">Starfield</div>
                  <div class="settings-description">Toggle the animated starfield background.</div>
                </div>
                <div class="switch" id="starfieldSwitch">
                  <div class="switch-thumb"></div>
                </div>
              </div>
              <div class="settings-row">
                <div>
                  <div class="settings-label">Parallax Glow</div>
                  <div class="settings-description">Subtle parallax nebula movement.</div>
                </div>
                <div class="switch" id="parallaxSwitch">
                  <div class="switch-thumb"></div>
                </div>
              </div>
            </div>
          </div>

          <div>
            <div class="settings-section-title">Animations</div>
            <div class="settings-card">
              <div class="settings-row">
                <div>
                  <div class="settings-label">Iframe Fade</div>
                  <div class="settings-description">Fade pages in when they load.</div>
                </div>
                <div class="switch" id="iframeFadeSwitch">
                  <div class="switch-thumb"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="settings-footer">
          GalaxyBrowserV2 · <span>William</span> · Settings are stored locally in this browser.
        </div>
      </div>

      <!-- BROWSER -->
      <div class="browser" id="browser">
        <div class="tab-bar">
          <div class="tab active" data-target="web">
            <div class="tab-icon"></div>
            <div class="tab-title">Web</div>
          </div>
          <div class="tab" data-target="about">
            <div class="tab-icon"></div>
            <div class="tab-title">About / Owner</div>
          </div>
        </div>

        <div class="nav-row">
          <div class="nav-buttons">
            <button class="nav-btn" id="backBtn" title="Back">⟵</button>
            <button class="nav-btn" id="forwardBtn" title="Forward">⟶</button>
            <button class="nav-btn" id="reloadBtn" title="Reload">⟳</button>
          </div>
          <div class="address-bar">
            <input
              id="addressInput"
              class="address-input"
              type="text"
              placeholder="type a URL or search the galaxy..."
            />
            <div class="search-icon">⌕</div>
          </div>
        </div>
        <div class="search-hint">
          <span>Tip:</span> Press Enter to go. If it’s not a URL, it searches the web.
        </div>

        <div class="content-wrapper" id="contentWrapper">
          <div class="content-overlay"></div>
          <div class="loading-orbit">
            <div class="orbit-ring">
              <div class="orbit-core"></div>
            </div>
          </div>
          <iframe
            id="webView"
            class="content-iframe"
            src="https://williampitcher347-sys.github.io/Galaxia-store/"
          ></iframe>
          <div id="aboutPage" style="display:none;">
            <div class="about-page">
              <div>
                <div class="about-heading">Owner & Credits</div>
                <div class="about-subtitle">
                  This instance of <strong>GalaxyBrowserV2</strong> is created and owned by William. All interface design,
                  layout, and custom browser logic in this file are authored by William unless otherwise stated.
                </div>
              </div>

              <div class="about-grid">
                <div class="about-card">
                  <div class="about-label">Owner</div>
                  <div class="about-owner">William</div>
                  <div class="about-email">Williampitcher347@gmail.com</div>
                  <div class="about-chip-row">
                    <div class="chip accent">GalaxyBrowserV2</div>
                    <div class="chip">Custom UI</div>
                    <div class="chip">Single-file build</div>
                    <div class="chip">HTML · CSS · JavaScript</div>
                  </div>
                </div>

                <div class="about-card">
                  <div class="about-label">Code & Copyright</div>
                  <div class="copyright-text">
                    <span class="copyright-strong">Copyright © <span id="copyrightYear"></span> William.</span>
                    All rights reserved. This code, layout, and design are provided for personal use by the owner.
                    You are not permitted to copy, redistribute, or claim ownership of this code or any
                    distinctive design elements without explicit permission from William.
                  </div>
                  <div class="copyright-text" style="margin-top:8px;">
                    Unauthorized use, reproduction, or distribution of this file or its contents may violate copyright
                    and intellectual property laws.
                  </div>
                </div>
              </div>

              <div class="footer-line">
                GalaxyBrowserV2 · <span>William</span> · Single-file edition
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- CHAT TOGGLE -->
      <div class="chat-toggle" id="chatToggle">
        <div class="chat-toggle-pill active" id="chatTogglePill">CHAT</div>
        <div class="chat-toggle-orb" id="chatToggleOrb">
          <div class="chat-toggle-orb-inner"></div>
        </div>
      </div>

      <!-- CHAT PANEL -->
      <div class="chat-panel" id="chatPanel">
        <div class="chat-header">
          <div class="chat-title-block">
            <div class="chat-title">Galaxia Chat</div>
            <div class="chat-subtitle">Connected to MockAPI · Galaxia-messages</div>
          </div>
          <div style="display:flex;align-items:center;gap:6px;">
            <div class="chat-status-pill">
              <div class="status-dot"></div>
              Live endpoint
            </div>
            <button class="chat-close-btn" id="chatCloseBtn" title="Close chat">✕</button>
          </div>
        </div>

        <div class="chat-body">
          <div class="chat-messages" id="chatMessages">
            <div class="chat-empty" id="chatEmpty">No messages yet. Be the first to speak into the void.</div>
          </div>

          <form class="chat-form" id="chatForm">
            <div class="chat-row">
              <input
                type="text"
                id="chatName"
                class="chat-name-input"
                placeholder="name / handle"
                autocomplete="off"
              />
              <input
                type="text"
                id="chatInput"
                class="chat-input"
                placeholder="type a message..."
                autocomplete="off"
              />
              <button type="submit" class="chat-send-btn">Send</button>
            </div>
            <div class="chat-footer">
              <div>Endpoint: <span>/Galaxia-messages</span></div>
              <div>Messages sync every <span>5s</span></div>
            </div>
            <div class="chat-error" id="chatError"></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    // BASIC STATE
    const iframe = document.getElementById("webView");
    const contentWrapper = document.getElementById("contentWrapper");
    const addressInput = document.getElementById("addressInput");
    const aboutPage = document.getElementById("aboutPage");
    const tabs = document.querySelectorAll(".tab");
    const copyrightYear = document.getElementById("copyrightYear");
    const browserEl = document.getElementById("browser");

    const chatEndpoint = "https://696fdb3ca06046ce61880d4c.mockapi.io/Galaxia-messages";

    const chatPanel = document.getElementById("chatPanel");
    const chatToggle = document.getElementById("chatToggle");
    const chatTogglePill = document.getElementById("chatTogglePill");
    const chatToggleOrb = document.getElementById("chatToggleOrb");
    const chatCloseBtn = document.getElementById("chatCloseBtn");

    const settingsBtn = document.getElementById("settingsBtn");
    const settingsPanel = document.getElementById("settingsPanel");
    const stylePillBtn = document.getElementById("stylePill");
    const styleOrbBtn = document.getElementById("styleOrb");
    const starfieldSwitch = document.getElementById("starfieldSwitch");
    const parallaxSwitch = document.getElementById("parallaxSwitch");
    const iframeFadeSwitch = document.getElementById("iframeFadeSwitch");
    const starfieldEl = document.getElementById("starfield");
    const parallaxLayerEl = document.getElementById("parallaxLayer");

    const historyStack = [];
    let historyIndex = -1;
    let currentMode = "web"; // "web" or "about"
    let iframeFadeEnabled = true;
    let parallaxEnabled = true;

    // UTILITIES
    function isLikelyUrl(value) {
      return value.includes(".") && !value.includes(" ");
    }

    function buildUrlOrSearch(value) {
      const trimmed = value.trim();
      if (!trimmed) return null;

      if (isLikelyUrl(trimmed)) {
        if (/^https?:\/\//i.test(trimmed)) {
          return trimmed;
        }
        return "https://" + trimmed;
      }

      const encoded = encodeURIComponent(trimmed);
      return "https://duckduckgo.com/?q=" + encoded;
    }

    function setLoading(isLoading) {
      if (isLoading) {
        contentWrapper.classList.add("loading");
        if (iframeFadeEnabled) iframe.classList.add("fading");
      } else {
        contentWrapper.classList.remove("loading");
        iframe.classList.remove("fading");
      }
    }

    function pushHistory(url) {
      if (historyIndex < historyStack.length - 1) {
        historyStack.splice(historyIndex + 1);
      }
      historyStack.push(url);
      historyIndex = historyStack.length - 1;
    }

    function navigateTo(url) {
      if (!url) return;
      currentMode = "web";
      iframe.style.display = "block";
      aboutPage.style.display = "none";

      setLoading(true);
      iframe.src = url;
      pushHistory(url);

      try {
        const clean = url.replace(/^https?:\/\//i, "");
        addressInput.value = clean;
      } catch (e) {}
    }

    function showAboutPage() {
      currentMode = "about";
      iframe.style.display = "none";
      aboutPage.style.display = "block";
      setLoading(false);
    }

    // TABS
    tabs.forEach((tab) => {
      tab.addEventListener("click", () => {
        tabs.forEach((t) => t.classList.remove("active"));
        tab.classList.add("active");

        const target = tab.getAttribute("data-target");
        if (target === "about") {
          showAboutPage();
        } else {
          currentMode = "web";
          iframe.style.display = "block";
          aboutPage.style.display = "none";
        }
      });
    });

    // NAV BUTTONS
    document.getElementById("backBtn").addEventListener("click", () => {
      if (historyIndex > 0) {
        historyIndex--;
        const url = historyStack[historyIndex];
        currentMode = "web";
        iframe.style.display = "block";
        aboutPage.style.display = "none";
        setLoading(true);
        iframe.src = url;
        try {
          addressInput.value = url.replace(/^https?:\/\//i, "");
        } catch (e) {}
      }
    });

    document.getElementById("forwardBtn").addEventListener("click", () => {
      if (historyIndex < historyStack.length - 1) {
        historyIndex++;
        const url = historyStack[historyIndex];
        currentMode = "web";
        iframe.style.display = "block";
        aboutPage.style.display = "none";
        setLoading(true);
        iframe.src = url;
        try {
          addressInput.value = url.replace(/^https?:\/\//i, "");
        } catch (e) {}
      }
    });

    document.getElementById("reloadBtn").addEventListener("click", () => {
      if (currentMode === "about") {
        showAboutPage();
      } else if (historyIndex >= 0) {
        setLoading(true);
        iframe.src = historyStack[historyIndex];
      }
    });

    // ADDRESS INPUT
    addressInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        const value = addressInput.value;
        const url = buildUrlOrSearch(value);
        navigateTo(url);
      }
    });

    iframe.addEventListener("load", () => {
      setLoading(false);
    });

    // ABOUT PAGE YEAR
    copyrightYear.textContent = new Date().getFullYear();

    // CHAT LOGIC
    const chatMessagesEl = document.getElementById("chatMessages");
    const chatEmptyEl = document.getElementById("chatEmpty");
    const chatForm = document.getElementById("chatForm");
    const chatInput = document.getElementById("chatInput");
    const chatNameInput = document.getElementById("chatName");
    const chatErrorEl = document.getElementById("chatError");

    function renderMessages(messages) {
      chatMessagesEl.innerHTML = "";
      if (!messages || messages.length === 0) {
        chatEmptyEl.style.display = "flex";
        return;
      }
      chatEmptyEl.style.display = "none";

      messages.forEach((msg) => {
        const wrapper = document.createElement("div");
        wrapper.className = "message";

        const meta = document.createElement("div");
        meta.className = "message-meta";

        const name = document.createElement("span");
        name.textContent = msg.name || "Anonymous";

        const time = document.createElement("span");
        const createdAt = msg.createdAt ? new Date(msg.createdAt) : null;
        time.textContent = createdAt ? createdAt.toLocaleTimeString() : "";

        meta.appendChild(name);
        meta.appendChild(time);

        const bubble = document.createElement("div");
        bubble.className = "message-bubble";
        bubble.textContent = msg.text || "";

        wrapper.appendChild(meta);
        wrapper.appendChild(bubble);

        const selfName = chatNameInput.value.trim();
        if (selfName && msg.name && msg.name.toLowerCase() === selfName.toLowerCase()) {
          wrapper.classList.add("self");
        }

        chatMessagesEl.appendChild(wrapper);
      });

      chatMessagesEl.scrollTop = chatMessagesEl.scrollHeight;
    }

    async function fetchMessages() {
      try {
        chatErrorEl.textContent = "";
        const res = await fetch(chatEndpoint);
        if (!res.ok) throw new Error("Failed to fetch messages");
        const data = await res.json();
        renderMessages(data);
      } catch (err) {
        chatErrorEl.textContent = "Could not sync messages. Check your endpoint or network.";
      }
    }

    async function sendMessage(name, text) {
      const payload = {
        name: name || "Anonymous",
        text: text,
        createdAt: new Date().toISOString(),
      };

      try {
        chatErrorEl.textContent = "";
        const res = await fetch(chatEndpoint, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(payload),
        });
        if (!res.ok) throw new Error("Failed to send message");
        chatInput.value = "";
        await fetchMessages();
      } catch (err) {
        chatErrorEl.textContent = "Message failed to send.";
      }
    }

    chatForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const text = chatInput.value.trim();
      const name = chatNameInput.value.trim();
      if (!text) return;
      sendMessage(name, text);
    });

    fetchMessages();
    setInterval(fetchMessages, 5000);

    // CHAT PANEL TOGGLE
    function openChat() {
      chatPanel.classList.add("open");
      browserEl.classList.add("shifted");
    }

    function closeChat() {
      chatPanel.classList.remove("open");
      browserEl.classList.remove("shifted");
    }

    chatToggle.addEventListener("click", () => {
      if (chatPanel.classList.contains("open")) {
        closeChat();
      } else {
        openChat();
      }
    });

    chatCloseBtn.addEventListener("click", () => {
      closeChat();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        closeChat();
        settingsPanel.classList.remove("open");
      }
    });

    // SETTINGS PANEL TOGGLE
    settingsBtn.addEventListener("click", () => {
      settingsPanel.classList.toggle("open");
    });

    // SETTINGS: CHAT BUTTON STYLE
    function applyChatStyle(style) {
      if (style === "orb") {
        chatTogglePill.classList.remove("active");
        chatToggleOrb.classList.add("active");
        stylePillBtn.classList.remove("active");
        styleOrbBtn.classList.add("active");
      } else {
        chatTogglePill.classList.add("active");
        chatToggleOrb.classList.remove("active");
        stylePillBtn.classList.add("active");
        styleOrbBtn.classList.remove("active");
      }
      localStorage.setItem("gbv2_chat_style", style);
    }

    stylePillBtn.addEventListener("click", () => {
      applyChatStyle("pill");
    });

    styleOrbBtn.addEventListener("click", () => {
      applyChatStyle("orb");
    });

    // SETTINGS: SWITCHES
    function toggleSwitch(switchEl, on) {
      if (on) {
        switchEl.classList.add("on");
      } else {
        switchEl.classList.remove("on");
      }
    }

    function applyStarfield(on) {
      toggleSwitch(starfieldSwitch, on);
      starfieldEl.classList.toggle("off", !on);
      localStorage.setItem("gbv2_starfield", on ? "1" : "0");
    }

    function applyParallax(on) {
      toggleSwitch(parallaxSwitch, on);
      parallaxLayerEl.classList.toggle("off", !on);
      parallaxEnabled = on;
      localStorage.setItem("gbv2_parallax", on ? "1" : "0");
    }

    function applyIframeFade(on) {
      toggleSwitch(iframeFadeSwitch, on);
      iframeFadeEnabled = on;
      localStorage.setItem("gbv2_iframe_fade", on ? "1" : "0");
    }

    starfieldSwitch.addEventListener("click", () => {
      const on = !starfieldSwitch.classList.contains("on");
      applyStarfield(on);
    });

    parallaxSwitch.addEventListener("click", () => {
      const on = !parallaxSwitch.classList.contains("on");
      applyParallax(on);
    });

    iframeFadeSwitch.addEventListener("click", () => {
      const on = !iframeFadeSwitch.classList.contains("on");
      applyIframeFade(on);
    });

    // PARALLAX MOUSE MOVE
    document.addEventListener("mousemove", (e) => {
      if (!parallaxEnabled) return;
      const x = (e.clientX / window.innerWidth - 0.5) * 20;
      const y = (e.clientY / window.innerHeight - 0.5) * 20;
      parallaxLayerEl.style.transform = `translate(${x}px, ${y}px)`;
    });

    // INITIAL SETTINGS LOAD
    (function initSettings() {
      const savedStyle = localStorage.getItem("gbv2_chat_style") || "pill";
      applyChatStyle(savedStyle);

      const starfieldOn = localStorage.getItem("gbv2_starfield");
      applyStarfield(starfieldOn !== "0");

      const parallaxOn = localStorage.getItem("gbv2_parallax");
      applyParallax(parallaxOn !== "0");

      const iframeFadeOn = localStorage.getItem("gbv2_iframe_fade");
      applyIframeFade(iframeFadeOn !== "0");
    })();

    // INITIAL HISTORY
    pushHistory("https://williampitcher347-sys.github.io/Galaxia-store/");
  </script><script>
/* ============================================================
   GALAXYBROWSERV2 ULTRA — FULL JAVASCRIPT ENGINE
   ============================================================ */

/* ------------------------------------------------------------
   GLOBAL STATE
------------------------------------------------------------ */
let currentUser = null;
let isAdmin = false;

const API_URL = "https://64f7e8f9824680fd217f6e4a.mockapi.io/messages"; // Replace if needed

/* Load saved state */
window.addEventListener("load", () => {
    currentUser = localStorage.getItem("gbv2_current_user");
    isAdmin = localStorage.getItem("gbv2_is_admin") === "true";

    updateChatAccess();
    updateAdminUI();
    loadBannedUsers();
    loadDeletedMessages();
    loadChatMessages();
});

/* ============================================================
   UTILITY: SHA-256 HASHING
============================================================ */
async function hash(text) {
    const encoder = new TextEncoder();
    const data = encoder.encode(text);
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    return Array.from(new Uint8Array(hashBuffer))
        .map(b => b.toString(16).padStart(2, "0"))
        .join("");
}

/* ============================================================
   TAB SWITCHING
============================================================ */
document.querySelectorAll(".tab-btn").forEach(btn => {
    btn.addEventListener("click", () => {
        document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        document.querySelectorAll(".tab-page").forEach(p => p.classList.remove("active"));
        document.getElementById(btn.dataset.tab).classList.add("active");
    });
});

/* ============================================================
   URL BAR + COLLAPSIBLE LOGIC
============================================================ */
const topBar = document.getElementById("topBar");
const collapseToggle = document.getElementById("collapseToggle");

collapseToggle.addEventListener("click", () => {
    topBar.classList.toggle("collapsed");
    collapseToggle.textContent = topBar.classList.contains("collapsed") ? "▼" : "▲";
});

/* Auto-hide on scroll */
window.addEventListener("wheel", (e) => {
    if (e.deltaY > 0) topBar.classList.add("collapsed");
    else topBar.classList.remove("collapsed");
});

/* URL navigation */
document.getElementById("goBtn").addEventListener("click", () => {
    const url = document.getElementById("urlInput").value;
    document.getElementById("browserFrame").src = url.startsWith("http") ? url : "https://" + url;
});

/* ============================================================
   CHAT SYSTEM
============================================================ */
let bannedUsers = [];
let deletedMessages = [];

/* Load banned users */
function loadBannedUsers() {
    const saved = localStorage.getItem("gbv2_banned_users");
    bannedUsers = saved ? JSON.parse(saved) : [];
    renderBannedList();
}

/* Load deleted messages */
function loadDeletedMessages() {
    const saved = localStorage.getItem("gbv2_deleted_messages");
    deletedMessages = saved ? JSON.parse(saved) : [];
}

/* Fetch messages */
async function loadChatMessages() {
    const res = await fetch(API_URL);
    const messages = await res.json();

    const filtered = messages.filter(m =>
        !bannedUsers.includes(m.username) &&
        !deletedMessages.includes(m.id)
    );

    renderMessages(filtered);
    renderAdminMessages(messages);
}

/* Render messages in both chat views */
function renderMessages(list) {
    const full = document.getElementById("chatFullMessages");
    const panel = document.getElementById("chatPanelMessages");

    full.innerHTML = "";
    panel.innerHTML = "";

    list.forEach(msg => {
        const div = document.createElement("div");
        div.textContent = `${msg.username}: ${msg.text}`;
        full.appendChild(div);

        const div2 = div.cloneNode(true);
        panel.appendChild(div2);
    });
}

/* Send message */
async function sendMessage(text) {
    if (!currentUser) return;

    if (bannedUsers.includes(currentUser)) {
        alert("You are banned from chatting.");
        return;
    }

    await fetch(API_URL, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ username: currentUser, text })
    });

    loadChatMessages();
}

/* Chat input handlers */
document.getElementById("chatFullSend").addEventListener("click", () => {
    const input = document.getElementById("chatFullInput");
    if (input.value.trim()) sendMessage(input.value.trim());
    input.value = "";
});

document.getElementById("chatPanelSend").addEventListener("click", () => {
    const input = document.getElementById("chatPanelInput");
    if (input.value.trim()) sendMessage(input.value.trim());
    input.value = "";
});

/* Chat access control */
function updateChatAccess() {
    const warn1 = document.getElementById("chatLoginWarning");
    const warn2 = document.getElementById("chatPanelWarning");

    const inputs = [
        document.getElementById("chatFullInput"),
        document.getElementById("chatPanelInput")
    ];
    const buttons = [
        document.getElementById("chatFullSend"),
        document.getElementById("chatPanelSend")
    ];

    if (!currentUser) {
        warn1.style.display = "block";
        warn2.style.display = "block";
        inputs.forEach(i => i.disabled = true);
        buttons.forEach(b => b.disabled = true);
    } else {
        warn1.style.display = "none";
        warn2.style.display = "none";
        inputs.forEach(i => i.disabled = false);
        buttons.forEach(b => b.disabled = false);
    }
}

/* ============================================================
   SLIDE-OUT CHAT PANEL
============================================================ */
const chatPanel = document.getElementById("chatPanel");
document.getElementById("chatToggleBtn").addEventListener("click", () => {
    chatPanel.classList.toggle("open");
});

/* ============================================================
   ACCOUNT SYSTEM
============================================================ */
function getUsers() {
    return JSON.parse(localStorage.getItem("gbv2_users") || "[]");
}

function saveUsers(users) {
    localStorage.setItem("gbv2_users", JSON.stringify(users));
}

/* Switch account pages */
function showAccountPage(id) {
    document.querySelectorAll(".account-page").forEach(p => p.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

/* Navigation */
document.getElementById("goToSignUp").onclick = () => showAccountPage("accountSignUp");
document.getElementById("goToForgot").onclick = () => showAccountPage("accountForgot");
document.getElementById("backToSignIn1").onclick = () => showAccountPage("accountSignIn");
document.getElementById("backToSignIn2").onclick = () => showAccountPage("accountSignIn");

/* Sign Up */
document.getElementById("signupBtn").addEventListener("click", async () => {
    const username = document.getElementById("signupUsername").value.trim();
    const pass = document.getElementById("signupPassword").value;
    const confirm = document.getElementById("signupConfirm").value;

    if (!username || username.length < 3) return alert("Invalid username.");
    if (pass !== confirm) return alert("Passwords do not match.");

    const users = getUsers();
    if (users.some(u => u.username === username)) return alert("Username already exists.");

    const q = document.getElementById("securityQuestion").value;
    const customQ = document.getElementById("customQuestionInput").value.trim();
    const answer = document.getElementById("securityAnswer").value.trim();

    const question = q === "custom" ? customQ : q;

    users.push({
        username,
        passwordHash: await hash(pass),
        question,
        answerHash: await hash(answer)
    });

    saveUsers(users);
    alert("Account created!");
    showAccountPage("accountSignIn");
});

/* Sign In */
document.getElementById("loginBtn").addEventListener("click", async () => {
    const username = document.getElementById("loginUsername").value.trim();
    const pass = document.getElementById("loginPassword").value;

    const users = getUsers();
    const user = users.find(u => u.username === username);
    if (!user) return alert("User not found.");

    if (user.passwordHash !== await hash(pass)) return alert("Incorrect password.");

    currentUser = username;
    localStorage.setItem("gbv2_current_user", username);

    updateChatAccess();
    alert("Logged in!");
});

/* Forgot Password */
document.getElementById("forgotLookup").addEventListener("click", () => {
    const username = document.getElementById("forgotUsername").value.trim();
    const users = getUsers();
    const user = users.find(u => u.username === username);
    if (!user) return alert("User not found.");

    document.getElementById("forgotQuestion").textContent = user.question;
    document.getElementById("forgotStep2").style.display = "block";
});

document.getElementById("forgotResetBtn").addEventListener("click", async () => {
    const username = document.getElementById("forgotUsername").value.trim();
    const answer = document.getElementById("forgotAnswer").value.trim();
    const pass = document.getElementById("forgotNewPass").value;
    const confirm = document.getElementById("forgotNewConfirm").value;

    const users = getUsers();
    const user = users.find(u => u.username === username);

    if (user.answerHash !== await hash(answer)) return alert("Incorrect answer.");
    if (pass !== confirm) return alert("Passwords do not match.");

    user.passwordHash = await hash(pass);
    saveUsers(users);

    alert("Password reset!");
    showAccountPage("accountSignIn");
});

/* ============================================================
   ADMIN PANEL
============================================================ */
function updateAdminUI() {
    if (isAdmin) {
        document.getElementById("adminLocked").classList.remove("active");
        document.getElementById("adminPanel").classList.add("active");
    }
}

/* Unlock admin */
document.getElementById("adminUnlockBtn").addEventListener("click", () => {
    const code = document.getElementById("adminCodeInput").value;
    if (code === "2013WP") {
        isAdmin = true;
        localStorage.setItem("gbv2_is_admin", "true");
        updateAdminUI();
    } else {
        document.getElementById("adminError").textContent = "Incorrect code.";
    }
});

/* Ban user */
document.getElementById("banUserBtn").addEventListener("click", () => {
    const name = document.getElementById("banUsernameInput").value.trim();
    if (!name) return;

    if (!bannedUsers.includes(name)) {
        bannedUsers.push(name);
        localStorage.setItem("gbv2_banned_users", JSON.stringify(bannedUsers));
        renderBannedList();
        loadChatMessages();
    }
});

/* Render banned list */
function renderBannedList() {
    const list = document.getElementById("bannedList");
    list.innerHTML = "";

    bannedUsers.forEach(name => {
        const li = document.createElement("li");
        li.textContent = name;

        const btn = document.createElement("button");
        btn.textContent = "Unban";
        btn.onclick = () => {
            bannedUsers = bannedUsers.filter(u => u !== name);
            localStorage.setItem("gbv2_banned_users", JSON.stringify(bannedUsers));
            renderBannedList();
            loadChatMessages();
        };

        li.appendChild(btn);
        list.appendChild(li);
    });
}

/* Admin message deletion */
function renderAdminMessages(messages) {
    const box = document.getElementById("adminMessagesList");
    box.innerHTML = "";

    messages.forEach(msg => {
        const div = document.createElement("div");
        div.className = "msg";
        div.textContent = `${msg.username}: ${msg.text}`;

        const btn = document.createElement("button");
        btn.textContent = "Delete";
        btn.onclick = () => {
            deletedMessages.push(msg.id);
            localStorage.setItem("gbv2_deleted_messages", JSON.stringify(deletedMessages));
            loadChatMessages();
        };

        div.appendChild(btn);
        box.appendChild(div);
    });
}

/* Admin password reset */
document.getElementById("resetPassBtn").addEventListener("click", async () => {
    const username = document.getElementById("resetUserInput").value.trim();
    const pass = document.getElementById("resetNewPass").value;
    const confirm = document.getElementById("resetNewConfirm").value;

    if (pass !== confirm) return alert("Passwords do not match.");

    const users = getUsers();
    const user = users.find(u => u.username === username);
    if (!user) return alert("User not found.");

    user.passwordHash = await hash(pass);
    saveUsers(users);

    if (currentUser === username) {
        currentUser = null;
        localStorage.removeItem("gbv2_current_user");
        updateChatAccess();
    }

    alert("Password reset!");
});

/* ============================================================
   SETTINGS PANEL
============================================================ */
document.getElementById("chatStyleSelect").addEventListener("change", (e) => {
    const btn = document.getElementById("chatToggleBtn");
    btn.classList.remove("orb", "pill");

    if (e.target.value === "orb") btn.classList.add("orb");
});

/* Close settings */
document.getElementById("closeSettings").addEventListener("click", () => {
    document.getElementById("settingsPanel").style.display = "none";
});
</script>
</body>
</html>
