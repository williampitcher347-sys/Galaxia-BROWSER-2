<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GALAXIA â€” COMMAND INTERFACE</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:'Orbitron',monospace}
body{margin:0;background:#000;color:#dff;overflow:hidden}
.hidden{display:none}

/* ===== AUTH ===== */
.auth{
  position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
}
.box{
  width:360px;padding:30px;border:1px solid #00fff0;
  box-shadow:0 0 25px #00fff0;
}
.box input,.box select{
  width:100%;margin-bottom:10px;padding:8px;
  background:#020617;border:1px solid #00fff0;color:#0ff;
}
.box button{
  width:100%;padding:10px;background:transparent;
  border:1px solid #00fff0;color:#0ff;cursor:pointer;
}
.link{text-align:center;font-size:12px;opacity:.6;cursor:pointer}

/* ===== APP ===== */
#topBar{height:45px;display:flex;align-items:center;border-bottom:1px solid #00fff0;padding:0 10px}
.tab{margin-right:15px;cursor:pointer;opacity:.6}
.tab.active{opacity:1;color:#00fff0}
#content{height:calc(100vh - 45px)}
iframe{width:100%;height:100%;border:none}

/* ===== CHAT ===== */
#chatBox,#orbChatBox{height:70%;overflow-y:auto;padding:10px;border-bottom:1px solid #00fff0}
.chat-msg{font-size:13px;margin-bottom:4px}
input,button{outline:none}

/* ===== ORB ===== */
#orb{
  position:fixed;bottom:20px;right:20px;
  width:55px;height:55px;border-radius:50%;
  border:1px solid #00fff0;box-shadow:0 0 20px #00fff0;
  cursor:pointer;
}
#orbPanel{
  position:fixed;bottom:85px;right:20px;width:300px;height:360px;
  background:#020617;border:1px solid #00fff0;
}
</style>
</head>

<body>

<!-- ================= SIGN IN ================= -->
<div id="signin" class="auth">
  <div class="box">
    <h3>SIGN IN</h3>
    <input id="siUser" placeholder="Username">
    <input id="siPass" type="password" placeholder="Password">
    <button onclick="signIn()">SIGN IN</button>
    <div class="link" onclick="show('signup')">Create account</div>
    <div class="link" onclick="show('reset')">Forgot password</div>
  </div>
</div>

<!-- ================= SIGN UP ================= -->
<div id="signup" class="auth hidden">
  <div class="box">
    <h3>SIGN UP</h3>
    <input id="suUser" placeholder="Username">
    <input id="suPass" type="password" placeholder="Password">
    <select id="suQ">
      <option>Favorite color?</option>
      <option>First pet?</option>
      <option>Favorite game?</option>
    </select>
    <input id="suA" placeholder="Answer">
    <button onclick="signUp()">CREATE ACCOUNT</button>
    <div class="link" onclick="show('signin')">Back to sign in</div>
  </div>
</div>

<!-- ================= RESET ================= -->
<div id="reset" class="auth hidden">
  <div class="box">
    <h3>RESET PASSWORD</h3>
    <input id="rpUser" placeholder="Username">
    <input id="rpA" placeholder="Security answer">
    <input id="rpPass" type="password" placeholder="New password">
    <button onclick="resetPass()">RESET</button>
    <div class="link" onclick="show('signin')">Back</div>
  </div>
</div>

<!-- ================= APP ================= -->
<div id="app" class="hidden">
  <div id="topBar">
    <div class="tab active" onclick="openTab('web')">WEB</div>
    <div class="tab" onclick="openTab('chat')">CHAT</div>
    <div class="tab" onclick="openTab('account')">ACCOUNT</div>
  </div>

  <div id="content">
    <div id="web">
      <iframe src="https://duckduckgo.com"></iframe>
    </div>
    <div id="chat" class="hidden">
      <div id="chatBox"></div>
      <input id="chatInput">
      <button onclick="sendMsg()">SEND</button>
    </div>
    <div id="account" class="hidden">
      <h3 id="accName"></h3>
      <button onclick="logout()">LOG OUT</button>
    </div>
  </div>
</div>

<!-- ================= ORB QUICK CHAT ================= -->
<div id="orb" onclick="toggleOrb()"></div>
<div id="orbPanel" class="hidden">
  <div id="orbChatBox"></div>
  <input id="orbInput">
  <button onclick="sendMsg(true)">SEND</button>
</div>

<script>
const API="https://696fdb3ca06046ce61880d4c.mockapi.io/messages";
let users=JSON.parse(localStorage.users||"{}");

/* ===== NAV ===== */
function show(id){
  ['signin','signup','reset'].forEach(x=>document.getElementById(x).classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

/* ===== AUTH ===== */
function signUp(){
  users[suUser.value]={pass:btoa(suPass.value),q:suQ.value,a:suA.value};
  localStorage.users=JSON.stringify(users);
  show('signin');
}
function signIn(){
  const u=siUser.value,p=siPass.value;
  if(users[u]?.pass===btoa(p)){
    localStorage.currentUser=u;
    accName.textContent="USER: "+u;
    document.querySelectorAll('.auth').forEach(a=>a.classList.add('hidden'));
    app.classList.remove('hidden');
    loadChat();
    setInterval(loadChat,4000);
  }
}
function resetPass(){
  if(users[rpUser.value]?.a===rpA.value){
    users[rpUser.value].pass=btoa(rpPass.value);
    localStorage.users=JSON.stringify(users);
    show('signin');
  }
}
function logout(){location.reload()}

/* ===== TABS ===== */
function openTab(id){
  document.querySelectorAll('#content>div').forEach(d=>d.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

/* ===== CHAT ===== */
async function loadChat(){
  const r=await fetch(API);
  const d=await r.json();
  chatBox.innerHTML=orbChatBox.innerHTML="";
  d.forEach(m=>{
    const line=document.createElement('div');
    line.className='chat-msg';
    line.textContent=m.user+": "+m.text;
    chatBox.appendChild(line.cloneNode(true));
    orbChatBox.appendChild(line.cloneNode(true));
  });
}
async function sendMsg(fromOrb=false){
  const input=fromOrb?orbInput:chatInput;
  if(!input.value) return;
  await fetch(API,{method:"POST",headers:{'Content-Type':'application/json'},
    body:JSON.stringify({user:localStorage.currentUser,text:input.value,timestamp:Date.now()})
  });
  input.value="";
  loadChat();
}

/* ===== ORB ===== */
function toggleOrb(){orbPanel.classList.toggle('hidden')}
</script>

</body>
</html>
